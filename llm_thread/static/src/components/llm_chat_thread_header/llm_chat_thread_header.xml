<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="llm_thread.LLMChatThreadHeader" owl="1">
        <div class="o_ThreadViewTopbar d-flex flex-shrink-0 w-100 px-3 bg-100 border-bottom" t-ref="root">
            <button t-if="isSmall" 
                    class="o_ThreadViewTopbar_button btn px-2 border-none rounded shadow-none me-2"
                    t-on-click="_onToggleThreadList">
                <i class="fa fa-lg fa-bars text-700" role="img" aria-label="Toggle thread list"/>
            </button>
            
            <div class="o_ThreadViewTopbar_title d-flex flex-grow-1 align-self-center align-items-center min-w-0">
                <t t-if="!llmChatThreadHeaderView.isEditingName">
                    <div class="o_ThreadViewTopbar_threadName o_ThreadViewTopbar_editableItem lead flex-shrink-1 px-1 border text-truncate fw-bold" 
                         t-att-title="thread.name" 
                         t-on-click="llmChatThreadHeaderView.onClickTopbarThreadName"
                         t-attf-class="{{ 'border-light' }}">
                        <t t-esc="thread.name"/>
                    </div>
                </t>
                <t t-if="llmChatThreadHeaderView.isEditingName">
                    <input class="o_ThreadViewTopbar_threadNameInput form-control lead fw-bold o_input_tooltip" 
                            type="text" 
                            autofocus="autofocus"
                            t-att-value="llmChatThreadHeaderView.pendingName"
                            t-on-input="onInputThreadNameInput"
                            t-on-keydown="onKeyDownThreadNameInput"
                            t-ref="threadNameInput"
                            title="Press Enter to save, Esc to cancel"
                            data-bs-toggle="tooltip"
                            data-bs-placement="bottom"/>
                </t>
                
                <!-- LLM Provider Dropdown -->
                <div class="dropdown ms-2">
                    <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <t t-if="selectedProvider">
                            <t t-esc="selectedProvider.name"/>
                        </t>
                        <t t-else="">
                            Select Provider
                        </t>
                    </button>
                    <ul class="dropdown-menu">
                        <t t-foreach="llmProviders" t-as="provider" t-key="provider.id">
                            <li>
                                <a class="dropdown-item" href="#" t-on-click="() => this.onSelectProvider(provider)">
                                    <t t-esc="provider.name"/>
                                </a>
                            </li>
                        </t>
                    </ul>
                </div>

                <!-- LLM Model Dropdown -->
                <div class="dropdown ms-2">
                    <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <t t-if="selectedModel">
                            <t t-esc="selectedModel.name"/>
                        </t>
                        <t t-else="">
                            Select Model
                        </t>
                    </button>
                    <ul class="dropdown-menu">
                        <t t-foreach="filteredModels" t-as="model" t-key="model.id">
                            <li>
                                <a class="dropdown-item" href="#" t-on-click="() => this.onSelectModel(model)">
                                    <t t-esc="model.name"/>
                                </a>
                            </li>
                        </t>
                    </ul>
                </div>
            </div>

            <button class="o_ThreadViewTopbar_button btn px-2 border-none rounded shadow-none" 
                    t-on-click="llmChatThreadHeaderView.openThreadSettings" 
                    title="Settings">
                <i class="fa fa-lg fa-gear text-700"/>
            </button>
        </div>
    </t>
</templates>
