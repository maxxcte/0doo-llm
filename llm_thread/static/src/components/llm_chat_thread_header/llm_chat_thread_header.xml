<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <t t-name="llm_thread.LLMChatThreadHeader" owl="1">
        <div
      class="o_ThreadViewTopbar d-flex flex-shrink-0 w-100 px-3 bg-100 border-bottom"
      t-ref="root"
    >
            <button
        t-if="isSmall"
        class="o_ThreadViewTopbar_button btn px-2 border-none rounded shadow-none me-2"
        t-on-click="_onToggleThreadList"
      >
                <i
          class="fa fa-lg fa-bars text-700"
          role="img"
          aria-label="Toggle thread list"
        />
            </button>

            <div
        class="o_ThreadViewTopbar_title d-flex flex-grow-1 align-self-center align-items-center min-w-0"
      >
                <t t-if="!llmChatThreadHeaderView.isEditingName || isSmall">
                    <div
            class="o_ThreadViewTopbar_threadName o_ThreadViewTopbar_editableItem lead flex-shrink-1 px-1 border text-truncate fw-bold"
            t-att-title="thread.name"
            t-on-click="llmChatThreadHeaderView.onClickTopbarThreadName"
            t-attf-class="{{ 'border-light' }}"
          >
                        <t t-esc="thread.name" />
                    </div>
                </t>
                <t t-if="llmChatThreadHeaderView.isEditingName and !isSmall">
                    <input
            class="o_ThreadViewTopbar_threadNameInput form-control lead fw-bold o_input_tooltip"
            type="text"
            autofocus="autofocus"
            t-att-value="llmChatThreadHeaderView.pendingName"
            t-on-input="onInputThreadNameInput"
            t-on-keydown="onKeyDownThreadNameInput"
            t-ref="threadNameInput"
            title="Press Enter to save, Esc to cancel"
            data-bs-toggle="tooltip"
            data-bs-placement="bottom"
          />
                </t>
            </div>

            <div t-if="!isSmall" class="o_ThreadDropdowns d-flex align-items-center">
                <!-- LLM Provider Dropdown -->
                <div class="dropdown">
                    <button
            class="btn btn-light dropdown-toggle d-flex align-items-center gap-2"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            style="max-width: 200px;"
          >
                        <div class="text-truncate">
                            <t t-if="llmChatThreadHeaderView.selectedProvider">
                                <t
                  t-esc="llmChatThreadHeaderView.selectedProvider.name"
                />
                            </t>
                            <t t-else="">
                                Select Provider
                            </t>
                        </div>
                    </button>
                    <ul class="dropdown-menu">
                        <t
              t-foreach="llmProviders"
              t-as="provider"
              t-key="provider.id"
            >
                            <li>
                                <a
                  class="dropdown-item text-truncate"
                  href="#"
                  t-on-click="() => this.onSelectProvider(provider)"
                  t-att-title="provider.name"
                >
                                    <t t-esc="provider.name" />
                                </a>
                            </li>
                        </t>
                    </ul>
                </div>

                <!-- LLM Model Dropdown -->
                <div class="dropdown ms-2">
                    <button
            class="btn btn-light dropdown-toggle d-flex align-items-center gap-2"
            type="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
            style="max-width: 200px;"
          >
                        <div class="text-truncate">
                            <t t-if="llmChatThreadHeaderView.selectedModel">
                                <t
                  t-esc="llmChatThreadHeaderView.selectedModel.name"
                />
                            </t>
                            <t t-else="">
                                Select Model
                            </t>
                        </div>
                    </button>
                    <ul class="dropdown-menu">
                        <t
              t-foreach="llmChatThreadHeaderView.modelsAvailableToSelect"
              t-as="model"
              t-key="model.id"
            >
                            <li>
                                <a
                  class="dropdown-item text-truncate"
                  href="#"
                  t-on-click="() => this.onSelectModel(model)"
                  t-att-title="model.name"
                >
                                    <t t-esc="model.name" />
                                </a>
                            </li>
                        </t>
                    </ul>
                </div>
            </div>

            <button
        class="o_ThreadViewTopbar_button btn px-2 border-none rounded shadow-none"
        t-if="isSmall"
        t-on-click="llmChatThreadHeaderView.openThreadSettings"
        title="Settings"
      >
                <i class="fa fa-lg fa-gear text-700" />
            </button>
        </div>
    </t>
</templates>
