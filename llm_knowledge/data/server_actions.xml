<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!-- Server Action for Creating RAG Documents -->
    <record id="action_create_rag_document" model="ir.actions.server">
        <field name="name">Create RAG Document</field>
        <field name="model_id" ref="base.model_ir_attachment" />
        <field name="binding_model_id" ref="base.model_ir_attachment" />
        <field name="binding_view_types">list,form</field>
        <field name="state">code</field>
        <field name="code">
            if records:
            action = {
            "type": "ir.actions.act_window",
            "name": "Create RAG Documents",
            "res_model": "llm.create.rag.document.wizard",
            "view_mode": "form",
            "target": "new",
            "context": {"active_model": records._name, "active_ids": records.ids},
            }
        </field>
    </record>

    <!-- Main Document Action -->
    <record id="action_llm_document" model="ir.actions.act_window">
        <field name="name">RAG Documents</field>
        <field name="res_model">llm.document</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{"search_default_group_by_state": 1}</field>
        <field name="help" type="html">
            <p
        class="o_view_nocontent_smiling_face"
      >Create your first RAG document</p>
            <p
      >Documents can be linked to any record in Odoo for RAG processing.</p>
        </field>
    </record>

    <!-- Server Action for Re-indexing RAG Documents -->
    <record id="action_reindex_rag_documents" model="ir.actions.server">
        <field name="name">Re-index RAG Documents</field>
        <field name="model_id" ref="model_llm_document" />
        <field name="binding_model_id" ref="model_llm_document" />
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">
            action = records.action_mass_reindex()
        </field>
    </record>

</odoo>
